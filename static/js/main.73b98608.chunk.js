(this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],{13:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(6),u=a.n(l),c=(a(13),a(7)),o=a(1),i=a(2),s=Object(n.createContext)(),m=function(e){var t=e.children,a=Object(n.useState)([]),l=Object(i.a)(a,2),u=l[0],m=l[1],d=Object(n.useState)([]),f=Object(i.a)(d,2),p=f[0],b=f[1],E=Object(n.useState)(),v=Object(i.a)(E,2),y=v[0],h=v[1],j=Object(n.useState)(),N=Object(i.a)(j,2),O=N[0],g=N[1],C=Object(n.useState)(),S=Object(i.a)(C,2),k=S[0],x=S[1],B=Object(n.useState)(),w=Object(i.a)(B,2),V=w[0],_=w[1],q=Object(n.useState)(),A=Object(i.a)(q,2),F=A[0],D=A[1],P=Object(n.useState)({column:"",comparison:"",value:""}),T=Object(i.a)(P,2),H=T[0],I=T[1],J=Object(n.useState)({loading:!0,filterByName:{name:""},filterByNumericValues:[],order:{column:"name",sort:"ASC"}}),L=Object(i.a)(J,2),G=L[0],X=L[1],z={deletFilter:function(e){X((function(t){return Object(o.a)(Object(o.a)({},t),{},{filterByNumericValues:t.filterByNumericValues.filter((function(t,a){return a!==e}))})}))},SortButton:function(e,t){X((function(a){return Object(o.a)(Object(o.a)({},a),{},{order:{column:t,sort:e}})}))},addFilter:H,addValues:function(e,t,a){X((function(n){return Object(o.a)(Object(o.a)({},n),{},{filterByNumericValues:[].concat(Object(c.a)(n.filterByNumericValues),[{column:e,comparison:t,value:a}])})}))},column:y,comparison:O,filtros:G,headers:p,inputText:function(e){X((function(t){return Object(o.a)(Object(o.a)({},t),{},{filterByName:{name:e}})}))},planets:u,setAddFilter:I,setColumn:h,setComparison:g,setFiltros:X,setHeaders:b,setPlanets:m,setSort:_,setSortColumn:D,setValue:x,sort:V,sortColumn:F,value:k};return r.a.createElement(s.Provider,{value:z},t)},d=function(e,t,a){var n=a.toLowerCase();return isNaN(e[0][n])?e.sort((function(e,t){return e[n]>t[n]?1:-1})):e.sort((function(e,t){return e[n]-t[n]})),"DESC"===t&&e.reverse(),e};var f=function(e){var t=e.planet;return r.a.createElement("tr",{key:t.name},r.a.createElement("td",{"data-testid":"planet-name"},t.name),r.a.createElement("td",null,t.rotation_period),r.a.createElement("td",null,t.orbital_period),r.a.createElement("td",null,t.diameter),r.a.createElement("td",null,t.climate),r.a.createElement("td",null,t.gravity),r.a.createElement("td",null,t.terrain),r.a.createElement("td",null,t.surface_water),r.a.createElement("td",null,t.population),r.a.createElement("td",null,t.films),r.a.createElement("td",null,t.created),r.a.createElement("td",null,t.edited),r.a.createElement("td",null,t.url))};var p=function(){var e=Object(n.useContext)(s),t=e.planets,a=e.headers,l=e.filtros;if(l.loading)return r.a.createElement("span",null,"L O A D I N G . . . . . ");var u=function(e){var t=e.filter((function(e){return e.name.includes(l.filterByName.name)}));return 0===l.filterByNumericValues.length?t:l.filterByNumericValues.reduce((function(e,t){var a=t.column,n=t.comparison,r=t.value;return e.filter((function(e){switch(n){case"maior que":return Number(e[a])>Number(r);case"menor que":return Number(e[a])<Number(r);case"igual a":return Number(e[a])===Number(r);default:return!1}}))}),t)}(t);return u=d(u,l.order.sort,l.order.column),r.a.createElement("div",null,r.a.createElement("table",{className:"table table-dark"},r.a.createElement("thead",null,r.a.createElement("tr",null,a.filter((function(e){return"residents"!==e})).map((function(e,t){return r.a.createElement("th",{key:"".concat(t+1)},e)})))),r.a.createElement("tbody",null,u.map((function(e,t){return r.a.createElement(f,{key:e.name,planet:e,i:t})})))))};var b=function(){return fetch("https://swapi.dev/api/planets/").then((function(e){return e.json()}))},E=["name","rotation_period","orbital_period","diameter","climate","gravity","terrain","surface_water","population","films","created","edited","url"],v=function(){var e=Object(n.useContext)(s),t=e.SortButton,a=e.setSort,l=e.sort,u=e.setSortColumn,c=e.sortColumn;return r.a.createElement("div",{className:"container d-flex"},r.a.createElement("select",{onChange:function(e){return u(e.target.value)},className:"form-control form-control-sm",style:{width:"150px"},"data-testid":"column-sort"},E.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("div",{className:"form-check form-check-inline"},r.a.createElement("label",{className:"form-check-label",htmlFor:"ASC"},r.a.createElement("input",{className:"form-check-input",onChange:function(){return a("ASC")},type:"radio",name:"radio","data-testid":"column-sort-input-asc",value:"ASC"}),"ASC"),r.a.createElement("label",{className:"form-check-label",htmlFor:"DESC"},r.a.createElement("input",{onChange:function(){return a("DESC")},type:"radio",className:"form-check-input",name:"radio","data-testid":"column-sort-input-desc",value:"DESC"}),"DESC")),r.a.createElement("button",{onClick:function(){return t(l,c)},"data-testid":"column-sort-button",type:"button",class:"btn btn-primary btn-sm"},"Sort"))},y=function(e,t){var a=function(e){var t=["population","orbital_period","diameter","rotation_period","surface_water"];if(e.filterByNumericValues.length>0){var a=e.filterByNumericValues.map((function(e){return e.column}));return t.filter((function(e){return!a.includes(e)}))}return t}(e);return r.a.createElement("select",{onChange:function(e){return t(e.target.value)},"data-testid":"column-filter",style:{width:"150px"},className:"form-control form-control-sm",name:"dropdown-filter-category"},r.a.createElement("option",{value:""},"--"),a.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))},h=function(e,t){return e.filterByNumericValues.length>0?e.filterByNumericValues.map((function(e,a){return r.a.createElement("span",{key:e.column,"data-testid":"filter"},r.a.createElement("p",null,e.column),r.a.createElement("button",{onClick:function(){return t(a)},type:"button",key:e.column},"X"))})):null},j=function(){var e=Object(n.useContext)(s),t=e.column,a=e.comparison,l=e.value,u=e.setColumn,c=e.setComparison,o=e.setValue,i=e.filtros,m=e.addValues,d=e.deletFilter;return r.a.createElement("div",null,r.a.createElement("form",{className:" container mb-5"},r.a.createElement("div",{className:" container d-flex"},y(i,u),r.a.createElement("select",{onChange:function(e){return c(e.target.value)},"data-testid":"comparison-filter",className:"form-control form-control-sm",style:{width:"150px"},name:"dropdown-quantity-filter"},r.a.createElement("option",{value:""},"--"),r.a.createElement("option",{value:"maior que"},"maior que"),r.a.createElement("option",{value:"menor que"},"menor que"),r.a.createElement("option",{value:"igual a"},"igual a")),r.a.createElement("div",{style:{width:"250px"},class:"input-group input-group-sm mb-3"},r.a.createElement("div",{class:"input-group-prepend"},r.a.createElement("span",{class:"input-group-text",id:"basic-addon1"},"Search")),r.a.createElement("input",{type:"number",class:"form-control",placeholder:"Digite um n\xfamero","aria-describedby":"basic-addon1",onChange:function(e){return o(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return m(t,a,l)},type:"button","data-testid":"button-filter",className:"btn-primary btn-sm"},"Submit"))),r.a.createElement(v,null)),h(i,d))};var N=function(){var e=Object(n.useContext)(s),t=e.setPlanets,a=e.setHeaders,l=e.filtros,u=e.inputText,c=e.setFiltros;return Object(n.useEffect)((function(){b().then((function(e){t(e.results),a(Object.keys(e.results[0])),c((function(e){return Object(o.a)(Object(o.a)({},e),{},{loading:!1})}))}))}),[]),r.a.createElement("div",null,r.a.createElement("div",{className:"container m-auto"},r.a.createElement("div",{style:{width:"250px"},class:"input-group input-group-sm mb-3"},r.a.createElement("div",{class:"input-group-prepend"},r.a.createElement("span",{class:"input-group-text",id:"basic-addon1"},"Search")),r.a.createElement("input",{"data-testid":"name-filter",value:l.filterByName.name,type:"text",class:"form-control",placeholder:"Termo de pesquisa",onChange:function(e){return u(e.target.value)}}))),r.a.createElement(j,null))};var O=function(){return r.a.createElement(m,null,r.a.createElement("div",{className:"App"},r.a.createElement(N,null),r.a.createElement(p,null)))};a(14);u.a.render(r.a.createElement(O,null),document.getElementById("root"))},8:function(e,t,a){e.exports=a(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.73b98608.chunk.js.map